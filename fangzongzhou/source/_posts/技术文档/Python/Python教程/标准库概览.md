---
title: 标准库概览
date: 2018-07-06 23:53:33
categories:
- 技术文档
- Python教程
tags:
- 翻译
---


## 操作系统接口
[os](https://docs.python.org/3/library/os.html#module-os) 模块提供一系列与操作系统进行交互的函数。

```
import os
os.getcwd()      # 返回当前工作目录

os.chdir('/server/accesslogs')   #  修改当前工作目录
os.system('mkdir today')   # 在系统shell中运行mkdir命令
```
确保使用```import os```而不是```from os import *```.它将导致[os.open()](https://docs.python.org/3/library/os.html#os.open)覆盖隐式内建函数[open()](https://docs.python.org/3/library/functions.html#open)，它们是完全不同的.

诸如os等大模块工作时，一些内建函数([dir()](https://docs.python.org/3/library/functions.html#dir) , [help()](https://docs.python.org/3/library/functions.html#help))的交互式帮助是很有用的.

```
import os
dir(os)

help(os)
```
针对日常的文件、目录的管理任务，[shutil](https://docs.python.org/3/library/shutil.html#module-shutil) 模块提供了易用的高级接口.
```
import shutil
shutil.copyfile('data.db', 'archive.db')

shutil.move('/build/executables', 'installdir')
```

## 文件通配符
[glob](https://docs.python.org/3/library/glob.html#module-glob) 模块提供了通过通配符列出文件列表的功能.
```
import glob
glob.glob('*.py')
```
## 命令行参数
常见的实用脚本通常需要处理命令行参数,这些参数以list的形式存储在[sys](https://docs.python.org/3/library/sys.html#module-sys) 模块的argv属性中.

使用下面的代码运行```python demo.py one two three```
```
import sys
print(sys.argv)
```
结果为```['demo.py', 'one', 'two', 'three']```

[getopt](https://docs.python.org/3/library/getopt.html#module-getopt) 模块约定使用Unix的 [getopt()](https://docs.python.org/3/library/getopt.html#module-getopt) 函数处理sys.argv,[argparse](https://docs.python.org/3/library/argparse.html#module-argparse) 模块提供了更强大易拓展的命令行处理流程.

## 错误输出重定向&程序终止
[sys]模块拥有 stdin,stdout和stderr属性,stderr是很有用的，即使在stdout被重定向后，由它发出警告和错误信息也都是可见的.
```
sys.stderr.write('Warning, log file not found starting a new one\n')
```

``` sys.exit() ```是停掉脚本最直接的方式

## 字符模式匹配
[re](https://docs.python.org/3/library/re.html#module-re) 模块为高级的字符处理提供了正则表达式工具. 针对复杂的匹配和处理，正则表达式提供了简明的解决方式.

```
import re
re.findall(r'\bf[a-z]*', 'which foot or hand fell fastest')

re.sub(r'(\b[a-z]+) \1', r'\1', 'cat in the the hat')
```
当仅仅需要一些简单的功能时，string 方法是更合适的选择，它的可读性更高，更易进行debug.

```
'tea for too'.replace('too', 'two')
```

## 数学运算
[math](https://docs.python.org/3/library/math.html#module-math) 模块为浮点运算提供了基于C  library 函数的入口
```
import math
math.cos(math.pi / 4)

math.log(1024, 2)
```

[random](https://docs.python.org/3/library/random.html#module-random) 模块提供了进行随机选择的工具.
```
import random
random.choice(['apple', 'pear', 'banana'])

random.sample(range(100), 10)   # sampling without replacement

random.random()    # random float

random.randrange(6)    # random integer chosen from range(6)
```
[statistic](https://docs.python.org/3/library/statistics.html#module-statistics)模块计算数值的基本统计属性(均值，中位数，方差等)
```
import statistics
data = [2.75, 1.75, 1.25, 0.25, 0.5, 1.25, 3.5]
statistics.mean(data)

statistics.median(data)

statistics.variance(data)
```
[SciPy](https://scipy.org/) 工程有很多进行数值运算的模块

## 接入互联网
有很多模块可用于接入互联网并处理互联网协议，这里列举两个最简单的：
- [urllib.request](https://docs.python.org/3/library/urllib.request.html#module-urllib.request) 从互联网地址获取数据


```
from urllib.request import urlopen
with urlopen('http://tycho.usno.navy.mil/cgi-bin/timer.pl') as response:
    for line in response:
        line = line.decode('utf-8')  # Decoding the binary data to text.
        if 'EST' in line or 'EDT' in line:  # look for Eastern Time
            print(line)
```

- [smtplib](https://docs.python.org/3/library/smtplib.html#module-smtplib) 发送邮件


```
import smtplib
server = smtplib.SMTP('localhost')
server.sendmail('soothsayer@example.org', 'jcaesar@example.org',
"""To: jcaesar@example.org
From: soothsayer@example.org

Beware the Ides of March.
""")
server.quit()
```

(注意: 这个例子需要localhost运行一个邮件服务)

## 日期和时间
[datetime]()提供了可以通过简单或复杂方式处理日期和时间的类，在提供日期时间运算的同时，侧重于高效的为格式化输出和处理进行成员导出，也支持时区相关的对象.
```
# dates are easily constructed and formatted
from datetime import date
now = date.today()
now

now.strftime("%m-%d-%y. %d %b %Y is a %A on the %d day of %B.")


# dates support calendar arithmetic
birthday = date(1964, 7, 31)
age = now - birthday
age.days
```

## 数据压缩
([zlib](https://docs.python.org/3/library/zlib.html#module-zlib),[gzip](https://docs.python.org/3/library/gzip.html#module-gzip),[bz2](https://docs.python.org/3/library/bz2.html#module-bz2),[lzma](https://docs.python.org/3/library/lzma.html#module-lzma),[zipfile](https://docs.python.org/3/library/zipfile.html#module-zipfile),[tarfile](https://docs.python.org/3/library/tarfile.html#module-tarfile))等模块支持常见的文件归档和压缩格式
```
import zlib
s = b'witch which has which witches wrist watch'
len(s)

t = zlib.compress(s)
len(t)

zlib.decompress(t)

zlib.crc32(s)
```
